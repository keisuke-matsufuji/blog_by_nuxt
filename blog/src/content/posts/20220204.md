---
title: 【JavaScript】webpackの基本を理解する
description: バンドルツールであるwebpackの概要について
created_at: 2022-02-04
updated_at: 2022-02-04
tags: JavaScript,webpack

top_image: javascript.svg
cover_image: 15
---

## はじめに
JavaScriptでの開発環境を整備する際、**webpack**についてはよく耳にすると思います。

私自身、名前は聞いたことがあるが具体的にどのような役割をしているのかよくわかっていない状態でしたので、こちらの記事で整理をしました。

最近のフロントエンド開発だと、Reactの```create-react-app```でプロジェクトの初回作成をする際など、webpackをよしなに設定をしてくれています。  
今回はそういった「ライブラリがいい感じに設定してくれていた」webpackの機能や役割などを学習しました。

## webpackの概要
webpackはモジュールハンドラです。モジュールハンドラとは異なる種類のファイル（JavaScript,TypeScript,CSS,JSXなど）を単一のファイルに結合（バンドル）するためのツールです。  

バンドルする目的は、モジュール化とネットワークパフォーマンスです。  

モジュール化はソースコードをより小さな部分に分割し、管理しやすくすることを指します。  

ネットワークパフォーマンスについては、ブラウザが依存ファイルをダウンロードする時間が短くなります。    

## webpackの機能
- コード分割
- ミニファイ
    - JavaScriptのファイルサイズを小さくするために、余計な空白や改行を取り除く
- 機能フラグ
    - ソースコードの特定の部分について、環境変数を指定することでビルド時に有効化/無効化できる機能
- Hot Module Replacement(HMR)
    - ソースコードの変更を監視して、リアルタイムに変更箇所をブラウザに反映する機能

## webpackを導入する利点
- モジュール化による利点
    - モジュールに分割することで、チーム開発時にメンバーそれぞれが編集するファイルの重複を避けることができます。
- 合成による利点
    - モジュールはコンパクトでシンプルであるほど再利用性が高く、他のモジュールとの合成が容易になります。
- ロード時間
    - HTMLのscriptタグに依存ファイルを記述する場合、それぞれのファイルは別々のHTTPリクエストによりダウンロードされるため、ファイル数が増えるとリクエスト数が増え、その分遅延が大きくなります。  
    依存ファイルを単一のファイルにまとめることで、この遅延を削減することができます。
- 一貫性
    - webpackをBabelや他のツールと併用してJSXなどで記述されたコードをコンパイルすることで、最新のJavaScriptの構文をすぐに使うことができます。ブラウザによって、JavaScriptの最新構文をサポートしていない場合もありますが、そういった構文をどのブラウザでも使うことができます。

## webpackの導入
webpckを使ったビルド環境を構築するには、まずnpmでパッケージを導入します。
```shell
$ npm install webpack webpack-cli
``` 

モジュールに分割されたアプリケーションを単一に結合するには、webpackに対して結合手順を教える必要があります。  
プロジェクトごとに設定ファイル(```webpack.config.js```)をプロジェクトのルートディレクトリに配置します。  
エントリファイル（通常のアプリケーションではindex.js）の先頭で```import文```でインポートされているモジュールをファイルシステムから呼び出してバンドルに追加します。  
ファイルの呼び出しは連鎖的になります。インポートされたモジュールの中で、さらにインポートされたモジュールをバンドルに追加していきます。  
webpackはこのインポートのツリーをたどることで、必要なすべてのモジュールをバンドルに追加します。  
また、その過程で、依存モジュールのグラフも作られます。  
画像やCSSといった、JSファイル以外のファイルも依存モジュールとして扱われ、成果物としてバンドルファイルを生成します。


## 最後に
モダンJavaScriptの開発で採用頻度の高いwebpackの概要を理解することができました。  
ライブラリがプロジェクト初回作成時によしなに設定してくれている部分があるということは意識しておきたいなと思います。